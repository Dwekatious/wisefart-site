<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-E5Q59W2ZYR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-E5Q59W2ZYR');
  </script>

  <!-- no-cache + mobile viewport -->
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0"/>
  <meta http-equiv="Pragma"        content="no-cache"/>
  <meta http-equiv="Expires"       content="0"/>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>

  <title>Wise Fart</title>

  <style>
    html,body{margin:0;height:100%;overflow:hidden;background:#000;font-family:sans-serif;}

    /* welcome */
    #welcome{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;
             align-items:center;color:#fff;gap:40px;background:#000;}
    #welcome h1{font-size:120px;margin:0;}
    #startBtn{padding:0 60px;font-size:32px;font-weight:700;cursor:pointer;border:none;border-radius:8px;
              background:#ffc107;color:#000;}

    /* game canvas */
    #wrap{position:absolute;top:50%;left:50%;transform-origin:top left;display:none;}
    #stage{width:1920px;height:1080px;position:relative;overflow:hidden;}
    #bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;cursor:pointer;}

    /* HUD */
    #hud{position:absolute;top:30px;left:30px;right:30px;display:flex;align-items:center;gap:40px;z-index:10;}
    #title{font:700 64px/1 sans-serif;color:#fff;text-shadow:2px 2px 4px #000;cursor:pointer;user-select:none;}
    #spacer{flex:1 1 auto;}
    #counter{display:flex;align-items:center;gap:14px;font:700 104px/1 sans-serif;color:#fff;text-shadow:2px 2px 4px #000;pointer-events:none;}
    #counter img{width:128px;height:128px;}
    #mute{width:96px;height:96px;border:none;border-radius:50%;font-size:60px;cursor:pointer;background:#333;color:#fff;
          display:flex;align-items:center;justify-content:center;}

    /* floating reward */
    .float{position:absolute;font:700 104px/1 sans-serif;color:#fff;text-shadow:2px 2px 4px #000;
           display:flex;align-items:center;gap:14px;pointer-events:none;}
    .float img{width:104px;height:104px;}
    @keyframes rise{from{opacity:1;transform:translateY(0);}to{opacity:0;transform:translateY(-90px);}}
  </style>
</head>
<body>

<!-- welcome -->
<div id="welcome">
  <h1>Wise Fart</h1>
  <button id="startBtn">START</button>
</div>

<!-- game -->
<div id="wrap">
  <div id="stage">
    <img id="bg" src="2.png" alt="background">

    <div id="hud">
      <div id="title">Wise&nbsp;Fart</div>
      <div id="spacer"></div>
      <div id="counter"><img src="3.png" alt="coin"><span>0</span></div>
      <button id="mute">ðŸ”Š</button>
    </div>
  </div>
</div>

<script>
window.addEventListener('DOMContentLoaded', () => {

  /* paths */
  const CLICK_SFX = 'fart.mp3';
  const BG_MUSIC  = 'wisee.mp3';
  const COIN_ICON = '3.png';

  /* elements */
  const wrapEl   = document.getElementById('wrap');
  const counter  = document.querySelector('#counter span');
  const muteBtn  = document.getElementById('mute');

  /* scaling */
  function fit() {
    const scale = Math.min(innerWidth / 1920, innerHeight / 1080);
    wrapEl.style.transform = `translate(-50%,-50%) scale(${scale})`;
    wrapEl.dataset.scale = scale;
  }
  fit();
  addEventListener('resize', fit);

  /* audio */
  const music     = new Audio(BG_MUSIC); music.loop = true; music.volume = 0.4;
  const clickPool = [...Array(4)].map(() => new Audio(CLICK_SFX));
  let clickIdx = 0, muted = false;

  muteBtn.onclick = () => {
    muted = !muted;
    muted ? music.pause() : music.play();
    muteBtn.textContent = muted ? 'ðŸ”‡' : 'ðŸ”Š';
  };

  /* state */
  let coins = 0;
  document.getElementById('title').onclick = () => { coins = 0; counter.textContent = 0; };

  /* start */
  document.getElementById('startBtn').onclick = () => {
    document.getElementById('welcome').style.display = 'none';
    wrapEl.style.display = 'block';
    fit();
    music.play().catch(() => {});
  };

  /* clicks */
  document.getElementById('stage').addEventListener('click', e => {
    if (muted) return;

    const click = clickPool[clickIdx];
    click.currentTime = 0;
    click.play().catch(() => {});
    clickIdx = (clickIdx + 1) % clickPool.length;

    counter.textContent = ++coins;

    const rect = wrapEl.getBoundingClientRect();
    const s    = +wrapEl.dataset.scale || 1;
    const fx   = document.createElement('div');
    fx.className = 'float';
    fx.innerHTML = `<img src="${COIN_ICON}" alt="coin">+1`;
    fx.style.left = `${(e.clientX - rect.left) / s}px`;
    fx.style.top  = `${(e.clientY - rect.top ) / s}px`;
    fx.style.animation = 'rise 0.9s forwards';
    document.getElementById('stage').appendChild(fx);
    setTimeout(() => fx.remove(), 900);
  });
});
</script>
</body>
</html>
